jQuery(function(a){function e(t){var e={action:"add_gift_card_amount",amount:a("#gift_card-amount").val(),product_id:a("#post_ID").val()},n=t.closest("span.add-new-amount-section");n.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),a.post(ywgc_data.ajax_url,e,function(t){1==t.code&&a("span.variation-amount-list").replaceWith(t.value),a("#gift_card-amount").val(""),a("#gift_card-amount").selectionStart=0,a("#gift_card-amount").selectionEnd=0,a("#gift_card-amount").focus(),n.unblock()})}a(document).on("click","a.remove-amount",function(t){t.preventDefault();var t={action:"remove_gift_card_amount",amount:a(this).closest("span.variation-amount").find('input[name="gift-card-amounts[]"]').val(),product_id:a("#post_ID").val()},e=a(this).closest("span.variation-amount");e.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),a.post(ywgc_data.ajax_url,t,function(t){1==t.code&&e.remove(),e.unblock()})}),a(document).on("click","a.add-new-amount",function(t){t.preventDefault(),e(a(this))}),a(document).on("keypress","input#gift_card-amount",function(t){13===event.which&&(t.preventDefault(),a(this).attr("disabled","disabled"),e(a(this)),a(this).removeAttr("disabled"))}),a(document).on("change",'input[name="ywgc_physical_gift_card"]',function(t){var e=a(this).prop("checked");a('input[name="_virtual"]').prop("checked",!e)}),a(document).on("click",".image-gallery-reset",function(t){t.preventDefault(),a("#ywgc-card-header-image img").remove(),a("#ywgc_product_image_id").val(0)}),a("body .ywgc_order_sold_as_gift_card").each(function(){a(this).parent("td").find(".wc-order-item-name").hide()}),a("._manage_stock_field").addClass("show_if_gift-card").show(),"undefined"!=typeof jQuery.fn.datepicker&&a(".ywgc-expiration-date-picker").datepicker({dateFormat:ywgc_data.date_format,minDate:1,maxDate:"+1Y"});var o=a("button.ywgc-actions:first").text();a(document).on("click","button.ywgc-actions",function(t){t.preventDefault(),console.log("click");var e=a(this),n=e.prev("#ywgc_direct_link").text(),t=a("<input>");a("body").append(t),t.val(n).select(),document.execCommand("copy"),t.remove();t=a("#ywgc_copied_to_clipboard").text();e.text(t),setTimeout(function(){e.text(o)},1e3)}),a(document).on("change",".ywgc-toggle-enabled input",function(){var t="yes"===a(this).val()?"yes":"no",e=a(this).closest(".ywgc-toggle-enabled"),n=e.data("gift-card-id");e.block({message:null,overlayCSS:{background:"#fff",opacity:.7},ignoreIfBlocked:!0}),a.ajax({type:"POST",data:{action:"ywgc_toggle_enabled_action",id:n,enabled:t},url:ajaxurl,success:function(t){"undefined"!=typeof t.error&&alert(t.error)},complete:function(){e.unblock()}})}),"yes"===a(".ywgc-override-product-settings input").val()&&(a(".ywgc-custom-amount-field").removeClass("ywgc-hidden"),a(".minimal-amount-field").removeClass("ywgc-hidden")),a(document).on("change",".ywgc-override-product-settings input",function(){a(this).val();a(".ywgc-custom-amount-field").toggle(),"yes"===a(".ywgc-custom-amount-field input").val()&&a(".minimal-amount-field").toggle()}),"yes"===a(".ywgc-custom-amount-field input").val()&&"yes"==a(".ywgc-override-product-settings input").val()?a(".minimal-amount-field").removeClass("ywgc-hidden"):a(".minimal-amount-field").addClass("ywgc-hidden"),a(document).on("change",".ywgc-custom-amount-field input",function(){a(this).val();a(".minimal-amount-field").toggle()}),"yes"===a(".ywgc-add-discount-settings input").val()&&a(".ywgc-add-discount-settings-container").removeClass("ywgc-hidden"),a(document).on("change",".ywgc-add-discount-settings input",function(){a(this).val();a(".ywgc-add-discount-settings-container").toggle()}),"yes"===a(".ywgc-expiration-settings input").val()&&a(".ywgc-expiration-settings-container").removeClass("ywgc-hidden"),a(document).on("change",".ywgc-expiration-settings input",function(){a(this).val();a(".ywgc-expiration-settings-container").toggle()}),a(document).on("mouseover","table tr.type-gift_card",function(t){a(this).css("background-color","#f1f6f8"),a(this).find("td.gift_card_actions .ywgc-actions").show()}),a(document).on("mouseout","table tr.type-gift_card",function(t){a(this).removeAttr("style"),a(this).find("td.gift_card_actions .ywgc-actions").hide()})});